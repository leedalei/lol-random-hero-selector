# LOL 随机英雄选择器 - 在线联机版

一个支持在线联机的LOL随机英雄选择器，允许两名玩家实时对战。

## 🚀 快速部署

### 🏠 方案1: 自服务器一键部署 ⭐ (推荐)

**成本**: 5-10美元/月 | **控制权**: 完全 | **性能**: 高

1. **准备服务器**:
   - 购买VPS (Vultr/DigitalOcean等)
   - Ubuntu 20.04+ 系统
   - 最低配置: 1CPU 1GB 25GB SSD

2. **自动化部署**:
```bash
# 克隆仓库
git clone https://github.com/your-username/lol-random-hero-selector.git
cd lol-random-hero-selector

# 配置服务器环境
cp .env.example .env
nano .env  # 填入服务器信息

# 一键初始化服务器
./scripts/deploy.sh init

# 推送代码触发自动部署
git push origin main
```

📖 详细指南: [GitHub Actions部署](./docs/GITHUB_ACTIONS_SETUP.md)

### 📦 方案2: 免费平台部署

**成本**: 免费 | **控制权**: 有限 | **性能**: 基础

1. **Fork本仓库**到你的GitHub
2. **部署前端到Vercel**:
   - 访问 [vercel.com](https://vercel.com)
   - 导入GitHub仓库
   - Vercel自动构建前端
3. **部署后端到Render**:
   - 访问 [render.com](https://render.com)
   - 导入GitHub仓库
   - 选择`server`文件夹作为根目录
   - 配置启动命令: `npm start`
4. **设置环境变量**:
   - Vercel项目中设置: `VITE_API_URL=https://your-backend.onrender.com`

### 📋 部署前检查

```bash
node deploy-check.js
```

📖 详细部署指南请查看 [DEPLOYMENT.md](./DEPLOYMENT.md)

## 🎮 功能特性

### 在线联机模式
- **房间系统**: 支持32位随机房间ID，每个房间最多2名玩家
- **实时通信**: 基于WebSocket的实时同步
- **自动分配**: 玩家加入时自动分配红蓝两队
- **随机骰子**: 点击骰子为两队随机分配20个英雄
- **自动清理**: 房间空闲30秒自动销毁

### 页面布局
#### 1. 主页面
- 展示标题，玩家的名称（随机分配）
- 两个操作按钮 【加入房间】和【创建房间】以及【单机模式】
- 点击【加入房间】
  - 输入房间ID
  - 加入成功/失败
  - 进入房间/无动作
- 点击【创建房间】
  - 创建成功/失败
  - 并自动进入到房间界面

#### 2. 房间页面
- 顶栏左侧展示房间ID，玩家的名称（随机分配）
- 顶栏左侧显示当前房间人数，是否已就位，用蓝红两个圆圈表示
- 房间会自动分配一个队伍，如果是红色，那么房间页面就是浅红色底色，如果是蓝色，那么房间页面就是浅蓝色底色
- 顶栏右侧展示两个操作按钮【开始】【设置】和【离开】
- 只有创建房间的人才可以看到【开始】，另外一个人只有【离开】按钮
- 点击【开始】后，房间页面会显示随机结果，包括【蓝队随机结果】和【红队随机结果】，但是每个队伍的人只能看到自己所在队伍的结果
- 每次点击【开始】都会在左上角记录当前是第几盘游戏
- 点击【离开】则离开房间，回到主页面
- 点击【设置】则进入设置页面
  - 可以选择【蓝队随机个数】和【红队随机个数】（默认20人，最多50人）
  - 支持位置平衡随机功能开启

#### 3.单机模式
- 此页面不支持房间系统。
- 在开始随机前，展示当前所有的英雄列表、头像和名称
- 可以根据英雄位置（战士、法师、刺客、坦克、射手、辅助）筛选英雄
- 可以设置【蓝队随机个数】和【红队随机个数】（默认20人，最多50人）
- 点击【开始随机】后，展示随机结果，包括【蓝队随机结果】和【红队随机结果】
- 随机结果使用与英雄列表一致的卡片样式，保持头像在上、名称在下的形式
- 红蓝两队都提供截图功能，可以直接截图保存到剪贴板
- 每个队伍显示精确到秒的时间戳
- 支持根据位置平衡随机功能，确保每个位置都有英雄代表
- 英雄头像显示，支持加载失败回退机制

## 🛠 技术栈

### 前端
- **React 18** + **TypeScript** + **Vite**
- **Socket.IO Client** - 实时通信
- **Tailwind CSS** - 样式框架

### 后端
- **Node.js** + **Express** + **Socket.IO**
- **内存存储** - 房间状态管理
- **CORS支持** - 跨域访问

## 项目特点
- 🎮 支持14个英雄联盟英雄的随机选择
- 🎨 高度shadcn-ui使用，视觉效果现代
- 📱 响应式布局，支持移动端
- ⚡ Vite构建，开发体验极佳
- 🚀 可直接部署到Vercel
- 🎯 左右两栏布局，蓝队和红队结果清晰展示
- 🔍 支持按英雄位置筛选（战士、法师、刺客、坦克、射手、辅助）
- ⚖️ 支持根据位置平衡随机，确保队伍配置合理
- 🏷️ 每个英雄显示详细的属性信息和位置标签
- 🖼️ 真实英雄头像显示，来源于官方API
- 🛡️ 头像加载失败处理机制，确保界面稳定性
- 📸 红蓝两队截图功能，一键保存到剪贴板
- 🎨 统一的卡片样式设计，视觉体验一致

## 🚀 快速开始

### 本地开发

1. **安装前端依赖**
```bash
npm install
```

2. **启动完整开发环境** (前端+后端)
```bash
npm run dev:full
```

或者分别启动：

3. **启动前端** (端口 3007)
```bash
npm run dev
```

4. **启动后端** (端口 3001)
```bash
npm run dev:server
```

5. **访问应用**
- 主页: http://localhost:3007/home
- 房间页面: http://localhost:3007/room/[roomId]
- 单机模式: http://localhost:3007/offline
- 后端健康检查: http://localhost:3010/health

### 构建生产版本
```bash
npm run build
```

### 预览生产版本
```bash
npm run preview
```

## 部署到Vercel

1. 将项目推送到GitHub
2. 在Vercel中导入项目
3. Vercel会自动检测到Vite配置并部署

项目已包含 `vercel.json` 配置文件，支持一键部署。

## 🌐 路由系统

项目现在使用React Router实现页面路由：

- **`/`** - 自动重定向到主页
- **`/home`** - 主页面，显示用户ID，提供创建/加入房间选项
- **`/room/:roomId`** - 房间页面，支持直接URL访问
- **`/offline`** - 单机模式页面

## 📁 项目结构

```
lol-random-hero-selector/
├── src/
│   ├── components/          # React组件
│   │   ├── FilterAndControls.tsx # 筛选控件
│   │   ├── HeroList.tsx    # 英雄列表组件
│   │   └── RandomResult.tsx # 随机结果组件
│   ├── contexts/           # React Context
│   │   └── SocketContext.tsx # Socket.IO状态管理
│   ├── pages/              # 页面组件
│   │   ├── HomePage.tsx    # 主页面
│   │   ├── RoomPage.tsx    # 房间页面
│   │   └── OfflinePage.tsx # 单机模式页面
│   ├── services/           # 服务层
│   │   └── socket.ts       # Socket.IO客户端
│   ├── types/              # TypeScript类型定义
│   │   ├── hero.ts         # 英雄类型
│   │   └── room.ts         # 房间类型
│   ├── data/               # 数据文件
│   │   └── heroes.ts       # 英雄数据
│   ├── utils/              # 工具函数
│   │   └── random.ts       # 随机选择逻辑
│   ├── App.tsx             # 主应用组件和路由配置
│   ├── main.tsx            # 应用入口
│   └── index.css           # 全局样式
├── server/                 # 后端服务器
│   ├── index.js           # 服务器入口
│   └── package.json       # 服务器依赖
└── package.json           # 前端依赖
```

## 🎮 使用说明

### 在线模式

1. **进入主页** - 访问 `/home`，显示用户ID和连接状态
2. **创建房间** - 点击"创建房间"按钮，自动分配为房主并跳转到房间页面
3. **加入房间** - 点击"加入房间"，输入32位房间ID，成功后自动跳转
4. **房间页面** - 显示用户ID、房间ID、游戏局数、队伍状态
5. **房主权限** - 只有房主能看到"开始"和"设置"按钮
6. **开始游戏** - 房主点击开始，2秒动画后显示英雄分配结果
7. **查看结果** - 每位玩家只能看到自己队伍的英雄分配
8. **游戏统计** - 自动记录游戏局数，每次开始递增

### 单机模式

1. **进入单机** - 访问 `/offline` 或从主页点击"单机模式"
2. **英雄筛选**：在筛选区域选择要筛选的位置（全部、战士、法师、刺客、坦克、射手、辅助）
3. **队伍设置**：在右侧操作区域设置蓝队和红队的人数（每队最多50人，默认20人）
4. **平衡模式**：可选择开启"根据位置随机"模式，确保每个位置都有英雄代表（适用于6人以上的随机）
5. **开始随机**：点击"开始随机"按钮进行随机选择
6. **查看结果**：随机结果会显示在所有英雄列表的上方，包括蓝队和红队的英雄分配详情
7. **重新随机**：出现随机结果后，右侧会显示"重新随机"按钮
8. **精确时间**：蓝队和红队都会显示精确到秒的随机时间戳

### 头像说明
- 头像来源于腾讯官方API：`https://game.gtimg.cn/images/lol/act/img/skinloading/`
- 使用英雄的`instance_id`生成头像URL
- 如果头像加载失败，会自动回退显示英雄名称首字母
- 头像采用正方形设计，避免遮挡英雄信息
- 圆角边框设计，整体以shadcn-ui的风格进行设计

### 英雄位置说明
- **战士**（红色标签）：近战物理输出，生存能力强
- **法师**（青色标签）：远程魔法输出，爆发伤害高
- **刺客**（绿色标签）：高爆发，擅长击杀脆皮英雄
- **坦克**（黄色标签）：生存能力极强，保护队友
- **射手**（浅绿色标签）：远程物理输出，持续伤害高
- **辅助**（橙色标签）：保护队友，提供控制和治疗

## 技术亮点

- 使用React Hooks管理状态
- TypeScript提供完整的类型安全
- CSS Grid和Flexbox实现响应式布局
- 原生CSS实现暗黑主题，无需外部依赖
- Vite提供快速的构建和热重载体验
